<div class="dark:bg-slate-800 text-base-content rounded-md nspanel-box bg-base-100 shadow-xl" id="panel_status_box-{{ nspanel.data.id }}">
    <div class="">
    {% component "nspanel_status_header" id=nspanel.data.id state=nspanel.status.state update_progress=nspanel.status.progress %}{% endcomponent %}
</div>
<div class="p-2">
    <!-- Hidden data values for the specific panel -->
    <span id="nspanel_id" class="hidden nspanel_id_container">{{ nspanel.id }}</span>
    <span id="nspanel_mac_container" class="hidden nspanel_mac_container" data-nspanel-mac="{{ nspanel_mac }}">{{ nspanel.mac }}</span>

    <!-- Overlay for "accept/deny request" -->
    <div class="accept-request-overlay hidden">
    <div class="flex w-full items-/center justify-center pt-2">
        <span class="nspanel-name">NSPanel '{NAME}' is requesting access. THIS TEXT IS REPLACED BY JAVASCRIPT AS NEEDED!!!</span>
    </div>
    <div class="flex w-full items-center justify-center pt-2 pb-4">
        <div>
        <button class="text-base-content bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800" data-nspanel-mac="" onclick="send_nspanel_deny_request(this);">Deny</button>
        <button class="text-base-content bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" data-nspanel-mac="" onclick="send_nspanel_accept_request(this);">Accept</button>
        </div>
    </div>
    </div>

    <!-- Normal view for accepted panels -->
    <div class="nspanel-status-view">
    <!-- Name -->
    <div class="flex justify-between mx-auto mb-1 relative">
        <!-- Name -->
        <div class="w-full">
        <span class="">
            {% component "nspanel_name" id=nspanel.data.id name=nspanel.data.friendly_name %}{% endcomponent %}
        </span>
        </div>
        <!-- Status-->
        <div class="w-full me-2 mt-1">
            {% component "nspanel_status_text" id=nspanel.data.id progress=nspanel.status.update_progress state=nspanel.status.state %}{% endcomponent %}
        </div>
        <!-- Warning indicator -->
        <!-- <div class="badge badge-warning badge-xs mt-2 me-2 ms-1"></div> -->
        <!-- Warning popover-->
        <div data-popover id="nspanel_warning_popover" role="tooltip" class="absolute top-7 z-10 invisible inline-block w-60 md:w-96 text-sm text-gray-500 transition-opacity duration-300 bg-white border border-gray-200 rounded-lg shadow-sm opacity-0 dark:text-gray-400 dark:border-gray-600 dark:bg-gray-800">
            <div class="px-3 py-2 bg-gray-100 border-b border-gray-200 rounded-t-lg dark:border-gray-600 dark:bg-gray-700">
                <h3 class="font-semibold text-gray-900 dark:text-white">Warnings</h3>
            </div>
            <div class="px-3 mb-2" id="nspanel_warnings">
            <!-- Warnings are created in the index.js file-->
            </div>
            <div data-popper-arrow></div>
        </div>
        </span>
    </div>
    <!-- Status information -->
    <div class="flex justify-between items-end">
        <div>
        <div class="my-1">
            <!-- WiFi strength -->
            <div class="info-item">
                {% component "nspanel_status_wifi_signal_strength" id=nspanel.data.id state=nspanel.status.state signal_strength=nspanel.status.rssi %}{% endcomponent %}
            </div>
        </div>
        <div class="my-1">
            <!-- Temperature -->
            <div class="info-item">
                {% component "nspanel_status_temperature" id=nspanel.data.id state=nspanel.status.state temperature=nspanel.status.temperature %}{% endcomponent %}
            </span>
            </div>
        </div>
        <div class="my-1">
            <!-- RAM usage -->
            <div class="info-item">
                {% component "nspanel_status_ram_usage" id=nspanel.data.id state=nspanel.status.state ram_usage=nspanel.status.ram_usage %}{% endcomponent %}
            </div>
        </div>
        </div>
        <div>
        <button data-dropdown-toggle="nspanelActionsMenuDropdown-{{ nspanel.data.id }}" onclick="show_dropdown_menu(this);"
            class="font-medium text-sm px-1 py-1 text-center inline-flex items-center">
            <span class="mdi mdi-cog pr-2"></span>
        </button>
        <!-- Dropdown menu -->
        <div id="nspanelActionsMenuDropdown-{{ nspanel.data.id }}"
            class="hidden dropdown z-10 font-normal bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 dark:divide-gray-600 md:absolute inset-x-auto">
            <ul class="py-2 text-sm text-gray-700 dark:text-gray-400" aria-labelledby="dropdownLargeButton">
            <li>
                <!-- {% component "nspanel_reboot_button" id=nspanel.data.id state=nspanel.status.state %}{% endcomponent %} -->
            </li>
            <li>
                <a class="nspanel-settings-link block px-4 py-2 hover:bg-gray-600 hover:text-white"><span
                    class="mdi mdi-cog pr-2"></span>Settings</a>
            </li>
            <li>
                {% component 'nspanel_visit_link' id=nspanel.data.id state=nspanel.status.state address=nspanel.status.ip_address %}{% endcomponent %}
            </li>
            </ul>
            <ul class="py-2 text-sm text-gray-700 dark:text-gray-400" aria-labelledby="dropdownLargeButton">
            <li>
                <a hx-post="{% url 'htmx_nspanel_update_firmware' nspanel.data.id %}" id="firmware-update-{{ nspanel.data.id }}" hx-trigger="click, {% if nspanel.status.state != 'offline' %}firmware-update-all-nspanels from:body{% endif %}" hx-swap="none"
                class="block px-4 py-2 hover:bg-gray-600 hover:text-white cursor-pointer"><span
                    class="mdi mdi-upload pr-2"></span>Update firmware
                </a>
            </li>
            <li>
                <a hx-post="{% url 'htmx_nspanel_update_screen' nspanel.data.id %}" id="screen-update-{{ nspanel.data.id }}" hx-trigger="click, {% if nspanel.status.state != 'offline' %}screen-update-all-nspanels from:body{% endif %}" hx-swap="none"
                class="block px-4 py-2 hover:bg-gray-600 hover:text-white cursor-pointer"><span
                    class="mdi mdi-table-arrow-up pr-2"></span>Update screen
                </a>
            </li>
            </ul>
            <ul class="py-2 text-sm text-gray-700 dark:text-gray-400" aria-labelledby="dropdownLargeButton">
            <li>
                <a onclick="send_nspanel_delete_request(this);" data-nspanel-mac=""
                class="block px-4 py-2 hover:bg-gray-600 hover:text-white cursor-pointer"><span
                    class="mdi mdi-minus-circle pr-2"></span>Delete</a>
            </li>
            </ul>
        </div>
        </div>
    </div>
    </div>
</div>
</div>
